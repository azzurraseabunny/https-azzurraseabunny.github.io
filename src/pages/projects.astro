---
import BaseHead from '../components/BaseHead.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

// Dummy data for projects (this can be replaced with your actual content management logic)
const projects = [
  {
    slug: 'project-1',
    title: 'Project One',
    description: 'A brief description of Project One.',
    pubDate: new Date('2024-01-01'),
    heroImage: '/images/project-1.jpg',
    body: 'This is the detailed content of Project One.',
  },
  {
    slug: 'project-2',
    title: 'Project Two',
    description: 'A brief description of Project Two.',
    pubDate: new Date('2024-02-01'),
    heroImage: '/images/project-2.jpg',
    body: 'This is the detailed content of Project Two.',
  },
  {
    slug: 'project-3',
    title: 'Project Three',
    description: 'A brief description of Project Three.',
    pubDate: new Date('2024-03-01'),
    heroImage: '/images/project-3.jpg',
    body: 'This is the detailed content of Project Three.',
  },
];

// Check if we're in the project detail view or listing view
const { slug } = Astro.params;

// Find the specific project by slug if it exists
const project = slug ? projects.find(p => p.slug === slug) : null;
---
<!DOCTYPE html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <title>{slug ? project.title : SITE_TITLE}</title>
    <meta name="description" content={slug ? project.description : SITE_DESCRIPTION} />
    <style>
      /* Basic styles for project grid and individual project pages */
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .projects-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 2rem;
        padding: 1rem;
        list-style-type: none;
        margin: 0;
      }
      .project-panel {
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        transition: transform 0.3s ease;
      }
      .project-panel:hover {
        transform: scale(1.05);
      }
      .project-link {
        text-decoration: none;
        color: inherit;
        display: block;
        padding: 1rem;
      }
      .project-image {
        width: 100%;
        height: auto;
        border-radius: 8px;
      }
      .project-title-container {
        padding: 1rem;
        background-color: #333;
        color: #fff;
        text-align: center;
        border-radius: 0 0 8px 8px;
      }
      .project-title-container h4 {
        margin: 0;
        font-size: 1.5rem;
      }

      .project-detail {
        padding: 2rem;
        max-width: 800px;
        margin: 0 auto;
      }
      .project-detail img {
        width: 100%;
        height: auto;
        border-radius: 8px;
      }
    </style>
  </head>
  <body>
    <Header /> <!-- Add the Header here -->
    
    {slug ? (
      <!-- Project detail page -->
      <div class="project-detail">
        <h1>{project.title}</h1>
        <p><strong>Date:</strong> {project.pubDate.toLocaleDateString()}</p>
        {project.heroImage && (
          <img src={project.heroImage} alt={project.title} />
        )}
        <div>
          <p>{project.body}</p>
        </div>
        <a href="/projects">Back to Portfolio</a>
      </div>
    ) : (
      <!-- Portfolio listing page -->
      <h1>{SITE_TITLE}</h1>
      <div class="portfolio-container">
        <img src="/title/portfolio.gif" alt="Portfolio description" />
      </div>
      <main>
        <section>
          <ul class="projects-grid">
            {projects.map((project) => (
              <li class="project-panel">
                <a href={`/projects/${project.slug}`} class="project-link">
                  {project.heroImage && (
                    <img src={project.heroImage} alt={project.title} class="project-image" />
                  )}
                  <div class="project-title-container">
                    <h4>{project.title}</h4>
                  </div>
                </a>
              </li>
            ))}
          </ul>
        </section>
      </main>
    )}

    <Footer /> <!-- Add the Footer here -->
  </body>
</html>
